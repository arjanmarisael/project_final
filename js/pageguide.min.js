/*! pageguide 2013-11-19 */
tl=window.tl||{},tl.pg=tl.pg||{},tl.pg.default_prefs={auto_show_first:!0,loading_selector:"#loading",track_events_cb:function(){},handle_doc_switch:null,custom_open_button:null,pg_caption:"Site tour?",check_welcome_dismissed:function(){var a="tlypageguide_welcome_shown_"+tl.pg.hashUrl();try{if(localStorage.getItem(a))return!0}catch(b){if(document.cookie.indexOf(a)>-1)return!0}return!1},dismiss_welcome:function(){var a="tlypageguide_welcome_shown_"+tl.pg.hashUrl();try{localStorage.setItem(a,!0)}catch(b){var c=new Date;c.setDate(c.getDate()+365),document.cookie=a+"=true; expires="+c.toUTCString()}}},tl.pg.init=function(a){if(a=jQuery.extend({},tl.pg.default_prefs,a),0!==jQuery("#tlyPageGuide").length){jQuery("#tlyPageGuideWrapper").remove();var b=jQuery("#tlyPageGuide"),c=jQuery("<div>",{id:"tlyPageGuideWrapper"}),d=jQuery("<div>",{id:"tlyPageGuideMessages"}),e=jQuery("#tlyPageGuideWelcome");d.append('<a href="#" class="tlypageguide_close" title="Close Guide">close</a>').append("<span></span>").append("<div></div>").append('<a href="#" class="tlypageguide_back" title="Previous">Previous</a>').append('<a href="#" class="tlypageguide_fwd" title="Next">Next</a>'),null==a.custom_open_button&&$(".tlypageguide_toggle").length<1&&jQuery("<div/>",{title:"Launch Page Guide","class":"tlypageguide_toggle"}).append(a.pg_caption).append("<div><span>"+b.data("tourtitle")+"</span></div>").append('<a href="#" class="tlypageguide_close" title="close guide">close guide &raquo;</a>').appendTo(c),e.length>0&&(a.show_welcome=!a.check_welcome_dismissed(),a.show_welcome&&(jQuery("body").prepend('<div id="tlyPageGuideOverlay"></div>'),e.appendTo(c))),c.append(b),c.append(d),jQuery("body").append(c);var f=new tl.pg.PageGuide(jQuery("#tlyPageGuideWrapper"),a);return f.ready(function(){f.setup_handlers(),f.$base.children(".tlypageguide_toggle").animate({right:"-120px"},250),f.preferences.show_welcome&&f.pop_welcome()}),f}},tl.pg.PageGuide=function(a,b){this.preferences=b,this.$base=a,this.$all_items=jQuery("#tlyPageGuide > li",this.$base),this.$items=jQuery([]),this.$message=jQuery("#tlyPageGuideMessages"),this.$fwd=jQuery("a.tlypageguide_fwd",this.$base),this.$back=jQuery("a.tlypageguide_back",this.$base),this.$welcome=jQuery("#tlyPageGuideWelcome"),this.cur_idx=0,this.track_event=this.preferences.track_events_cb,this.handle_doc_switch=this.preferences.handle_doc_switch,this.custom_open_button=this.preferences.custom_open_button,this.is_open=!1},tl.pg.hashUrl=function(){var a,b,c=window.location.href,d=0;if(0===c.length)return d;for(a=0;a<c.length;a++)b=c.charCodeAt(a),d=(d<<5)-d+b,d&=d;return d.toString()},tl.pg.isScrolledIntoView=function(a){var b=jQuery(window).scrollTop(),c=b+jQuery(window).height(),d=jQuery(a).offset().top,e=d+jQuery(a).height();return e>=b&&c-100>=d},tl.pg.PageGuide.prototype.ready=function(a){var b=this,c=window.setInterval(function(){jQuery(b.preferences.loading_selector).is(":visible")||(a(),clearInterval(c))},250);return this},tl.pg.PageGuide.prototype._on_expand=function(){var a=document,b=window;this.position_tour(),this.cur_idx=0;var c=a.createElement("style");a.getElementsByTagName("head")[0].appendChild(c),b.createPopup||(c.appendChild(a.createTextNode("")),c.setAttribute("type","text/css"));var d=a.styleSheets[a.styleSheets.length-1],e="";this.$items.each(function(d){var f=jQuery(jQuery(this).data("tourtarget")+":visible:first");f.addClass("tlypageguide_shadow tlypageguide_shadow"+d);var g=".tlypageguide_shadow"+d+":after { height: "+f.outerHeight()+"px; width: "+f.outerWidth(!1)+"px; }";if(b.createPopup)e+=g;else{var h=a.createTextNode(g,0);c.appendChild(h)}jQuery(this).prepend("<ins>"+(d+1)+"</ins>"),jQuery(this).data("idx",d)}),b.createPopup&&(d.cssText=e),this.preferences.auto_show_first&&this.$items.length>0&&this.show_message(0)},tl.pg.PageGuide.prototype.open=function(){this.preferences.show_welcome&&(this.preferences.dismiss_welcome(),this.close_welcome()),this.is_open||(this.is_open=!0,this.track_event("PG.open"),this._on_expand(),this.$items.toggleClass("expanded"),jQuery("body").addClass("tlypageguide-open"))},tl.pg.PageGuide.prototype.close=function(){this.is_open&&(this.is_open=!1,this.track_event("PG.close"),this.$items.toggleClass("expanded"),this.$message.animate({height:"0"},500,function(){jQuery(this).hide()}),$('[class~="tlypageguide_shadow"]').removeClass(function(a,b){return b.match(/tlypageguide_shadow.*?\b/g).join(" ")}),jQuery("ins").remove(),jQuery("body").removeClass("tlypageguide-open"))},tl.pg.PageGuide.prototype.setup_handlers=function(){var a=this,b=null==a.custom_open_button?jQuery(".tlypageguide_toggle",this.$base):jQuery(a.custom_open_button);b.on("click",function(){return a.is_open?a.close():!a.preferences.show_welcome||a.preferences.check_welcome_dismissed()||jQuery("body").hasClass("tlyPageGuideWelcomeOpen")?a.open():a.pop_welcome(),!1}),jQuery(".tlypageguide_close",this.$message.add(jQuery(".tlypageguide_toggle"))).on("click",function(){return a.close(),!1}),this.$all_items.on("click",function(){var b=jQuery(this).data("idx");a.track_event("PG.specific_elt"),a.show_message(b)}),this.$fwd.on("click",function(){var b=(a.cur_idx+1)%a.$items.length;return a.track_event("PG.fwd"),a.show_message(b),!1}),this.$back.on("click",function(){var b=(a.cur_idx+a.$items.length-1)%a.$items.length;return a.track_event("PG.back"),a.show_message(b,!0),!1}),this.$welcome.length&&(this.$welcome.find(".tlypageguide_ignore").length&&this.$welcome.on("click",".tlypageguide_ignore",function(){a.close_welcome()}),this.$welcome.find(".tlypageguide_dismiss").length&&this.$welcome.on("click",".tlypageguide_dismiss",function(){a.close_welcome(),a.preferences.dismiss_welcome()}),this.$welcome.on("click",".tlypageguide_start",function(){a.open()})),jQuery(window).resize(function(){a.position_tour()})},tl.pg.PageGuide.prototype.show_message=function(a,b){var c=this.cur_idx,d=this.$items[c],e=this.$items[a];this.cur_idx=a,this.handle_doc_switch&&this.handle_doc_switch(jQuery(e).data("tourtarget"),jQuery(d).data("tourtarget")),jQuery("div",this.$message).html(jQuery(e).children("div").html()),this.$items.removeClass("tlypageguide-active"),jQuery(e).addClass("tlypageguide-active"),tl.pg.isScrolledIntoView(jQuery(e))||jQuery("html,body").animate({scrollTop:jQuery(e).offset().top-50},500);var f=100,g=this.$message.css("height");this.$message.css("height","auto");var h=this.$message.height();this.$message.css("height",g),f>h&&(h=f),h>jQuery(window).height()/2&&(h=jQuery(window).height()/2),h+="px",this.$message.not(":visible").show().animate({height:h},500),this.roll_number(jQuery("span",this.$message),jQuery(e).children("ins").html(),b)},tl.pg.PageGuide.prototype.roll_number=function(a,b,c){a.animate({"text-indent":(c?"":"-")+"50px"},"fast",function(){a.html(b),a.css({"text-indent":(c?"-":"")+"50px"},"fast").animate({"text-indent":"0"},"fast")})},tl.pg.PageGuide.prototype.position_tour=function(){this.$items=this.$all_items.filter(function(){return jQuery(jQuery(this).data("tourtarget")).is(":visible")}),this.$items.each(function(){var a=jQuery(this),b=jQuery(a.data("tourtarget")).filter(":visible:first"),c=a.data("position"),d=b.offset().left,e=b.offset().top;"fixed"==c&&(e-=jQuery(window).scrollTop()),a.hasClass("tlypageguide_top")?e-=60:e+=a.hasClass("tlypageguide_bottom")?b.outerHeight()+15:5,a.hasClass("tlypageguide_right")?d+=b.outerWidth(!1)+15:a.hasClass("tlypageguide_left")?d-=65:d+=5,a.css({left:d+"px",top:e+"px",position:c})})},tl.pg.PageGuide.prototype.pop_welcome=function(){jQuery("body").addClass("tlyPageGuideWelcomeOpen")},tl.pg.PageGuide.prototype.close_welcome=function(){jQuery("body").removeClass("tlyPageGuideWelcomeOpen")};